<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
	<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="http://cdn.socket.io/socket.io-1.0.3.js"></script>
	<link rel="stylesheet" type="text/css" href="css/chat.css">
</head>
<body>
	<div id="loginDiv">
		<input type="text" id="loginId" />
		<button id="loginBtn">로그인</button>
	</div>
	<div id="contentDiv" style="display:none">
		<ul class="chat-thread">
		</ul>
		<form class="chat-window">
			<input class="chat-window-message" name="chat-window-message" type="text" autocomplete="off" autofocus />
		</form>
	</div>
	<script>
		var socket;
		var loginId;

		$("#loginBtn").click(function () {
			// 소켓서버에 접속
		    socket = io.connect('http://192.168.0.15:10001');
		    loginId = $("#loginId").val();
		    socket.emit("login", loginId);
		    
		    socket.on("msg", function (data) {
		    	console.log("서버에서 응답");
		    	 $("ul.chat-thread").append('<li class="you">'+data+'</li>');
		    });
		    $("#loginDiv").hide();
		    $("#contentDiv").show();
		});
	  
	    $("form.chat-window").submit(function(){
	    	var $msg = $("input.chat-window-message").val();
	    	 $("ul.chat-thread").append('<li class="me">'+$msg+'</li>');
		    socket.emit("msg", {recvId: "chatbot", sendId: loginId, msg: $msg});
	    	return false;
	    });
	</script>
</body>
</html>
